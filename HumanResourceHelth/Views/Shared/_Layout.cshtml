@using HumanResourceHelth.Model
<!DOCTYPE html>
<html lang="en-US">
<head>
    <title>HR FACTORY</title>
    <meta name="author" content="HR Factory">
    <meta name="robots" content="index follow">
    <meta name="googlebot" content="index follow">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="keywords" content="HR Factory">
    <meta name="description" content="HR Factory">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" type="image/png" href="ContentImages/favicon.png" />
    <!-- google fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kalam:wght@700&display=swap" rel="stylesheet">



    <!-- animate -->
    <link rel="preload" href="~/assets/css/animate.css" as="style"
          onload="this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="~/assets/css/animate.css"></noscript>
    @*<link rel="stylesheet" href="~/assets/css/animate.css" />*@

    <!-- owl Carousel assets -->
    <link rel="preload" href="~/assets/css/owl.carousel.css" as="style"
          onload="this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="~/assets/css/owl.carousel.css"></noscript>
    @*<link href="~/assets/css/owl.carousel.css" rel="stylesheet">*@

    <link rel="preload" href="~/assets/css/owl.theme.css" as="style"
          onload="this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="~/assets/css/owl.theme.css"></noscript>
    @*<link href="~/assets/css/owl.theme.css" rel="stylesheet">*@

    <!-- bootstrap -->
    <link rel="preload" href="~/assets/css/bootstrap.min.css" as="style"
          onload="this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="~/assets/css/bootstrap.min.css"></noscript>
    @*<link rel="stylesheet" href="~/assets/css/bootstrap.min.css">*@
    <!-- hover anmation -->
    <link rel="preload" href="~/assets/css/hover-min.css" as="style"
          onload="this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="~/assets/css/hover-min.css"></noscript>
    <!-- <link rel="stylesheet" href="~/assets/css/hover-min.css"> -->
    <!-- flag icon -->
    <link rel="preload" href="~/assets/css/flag-icon.min.css" as="style"
          onload="this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="~/assets/css/flag-icon.min.css"></noscript>
    <!-- <link rel="stylesheet" href="~/assets/css/flag-icon.min.css"> -->
    @*<link rel="stylesheet" href="~/assets/css/skew.css">*@
    <!-- main style -->
    <link rel="preload" href="~/assets/css/flag-icon.min.css" as="style"
          onload="this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="~/assets/css/flag-icon.min.css"></noscript>
    <link rel="stylesheet" href="~/assets/css/style.css">
    <!-- colors -->
    <link rel="preload" href="~/assets/css/colors/main.css" as="style"
          onload="this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="~/assets/css/colors/main.css"></noscript>
    <!-- <link rel="stylesheet" href="~/assets/css/colors/main.css"> -->
    <!-- elegant icon -->
    <link rel="preload" href="~/assets/css/elegant_icon.css" as="style"
          onload="this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="~/assets/css/elegant_icon.css"></noscript>
    <!-- <link rel="stylesheet" href="~/assets/css/elegant_icon.css"> -->
    <!-- jquery  UI style  -->
    <link rel="preload" href="~/Content/themes/base/jquery-ui.css" as="style"
          onload="this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="~/Content/themes/base/jquery-ui.css"></noscript>
    <!-- <link href="~/Content/themes/base/jquery-ui.css" rel="stylesheet" /> -->
    <link rel="preload" href="~/Content/themes/base/jquery-ui.min.css" as="style"
          onload="this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="~/Content/themes/base/jquery-ui.min.css"></noscript>
    <!-- <link href="~/Content/themes/base/jquery-ui.min.css" rel="stylesheet" /> -->
    <!-- jquery library  -->
    <script type="text/javascript" src="~/assets/js/jquery-3.2.1.min.js"></script>
    <!-- jquery UI library  -->
    <script src="~/Scripts/jquery-ui-1.13.0.js"></script>
    <script src="~/Scripts/jquery-ui-1.13.0.min.js"></script>
    <!-- fontawesome  -->
    <script src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
    <!-- google maps api  -->
    @*<script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false"></script>*@
    @*<script type="text/javascript" src="~/assets/js/jquery.gomap-1.3.3.min.js"></script>*@
    <script src="~/Scripts/jquery-gauge.min.js"></script>
    <script src="~/Scripts/toastr.min.js"></script>
    <link rel="preload" href="~/Content/jquery-gauge.css" as="style"
          onload="this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="~/Content/jquery-gauge.css"></noscript>
    <!-- <link href="~/Content/jquery-gauge.css" rel="stylesheet" /> -->
    <link rel="preload" href="~/Content/toastr.css" as="style"
          onload="this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="~/Content/toastr.css"></noscript>
    <!-- <link href="~/Content/toastr.css" rel="stylesheet" /> -->
    <!-- REVOLUTION STYLE SHEETS -->
    <link rel="preload" href="~/assets/revslider/fonts/pe-icon-7-stroke/css/pe-icon-7-stroke.css" as="style"
          onload="this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="~/assets/revslider/fonts/pe-icon-7-stroke/css/pe-icon-7-stroke.css"></noscript>
    <!-- <link rel="stylesheet" type="text/css" href="~/assets/revslider/fonts/pe-icon-7-stroke/css/pe-icon-7-stroke.css"> -->
    @*<link rel="preload" href="~/assets/revslider/fonts/font-awesome/css/font-awesome.css" as="style"
              onload="this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="~/assets/revslider/fonts/font-awesome/css/font-awesome.css"></noscript>*@
    <link rel="stylesheet" type="text/css" href="~/assets/revslider/fonts/font-awesome/css/all.css">
    <link rel="preload" href="~/assets/revslider/css/settings.css" as="style"
          onload="this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="~/assets/revslider/css/settings.css"></noscript>
    <!-- <link rel="stylesheet" type="text/css" href="~/assets/revslider/css/settings.css"> -->


    <link href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;600;700;900&display=swap" rel="stylesheet">

    <!-- REVOLUTION LAYERS STYLES -->
    <!-- REVOLUTION JS FILES -->
    <script type="text/javascript" src="~/assets/revslider/js/jquery.themepunch.tools.min.js"></script>
    <script type="text/javascript" src="~/assets/revslider/js/jquery.themepunch.revolution.min.js"></script>

    <!-- SLIDER REVOLUTION 5.0 EXTENSIONS  (Load Extensions only on Local File Systems !  The following part can be removed on Server for On Demand Loading) -->
    <script type="text/javascript" src="~/assets/revslider/js/extensions/revolution.extension.actions.min.js"></script>
    <script type="text/javascript" src="~/assets/revslider/js/extensions/revolution.extension.carousel.min.js"></script>
    <script type="text/javascript" src="~/assets/revslider/js/extensions/revolution.extension.kenburn.min.js"></script>
    <script type="text/javascript" src="~/assets/revslider/js/extensions/revolution.extension.layeranimation.min.js"></script>
    <script type="text/javascript" src="~/assets/revslider/js/extensions/revolution.extension.migration.min.js"></script>
    <script type="text/javascript" src="~/assets/revslider/js/extensions/revolution.extension.navigation.min.js"></script>
    <script type="text/javascript" src="~/assets/revslider/js/extensions/revolution.extension.parallax.min.js"></script>
    <script type="text/javascript" src="~/assets/revslider/js/extensions/revolution.extension.slideanims.min.js"></script>
    <script type="text/javascript" src="~/assets/revslider/js/extensions/revolution.extension.video.min.js"></script>
    <script src="https://cdn.ckeditor.com/4.15.0/full/ckeditor.js"></script>
    <script src="~/Scripts/jquery.blockUI.js"></script>
    @RenderSection("styles", required: false)
</head>

<body class="background-white">
    @functions{
        IHtmlString GetContent(int contentId)
        {
            string content = "";
            List<Content> contents = (List<Content>)Session["Content"];
            if (!System.Threading.Thread.CurrentThread.CurrentCulture.TextInfo.IsRightToLeft)
            {
                content = contents.Where(x => x.Id == contentId).Single().EnglishText;
                if (content.Trim() == "") content = "Please Insert Text";
            }
            else
            {
                content = contents.Where(x => x.Id == contentId).Single().ArabicText;
                if (content.Trim() == "") content = "برجاء ادخال نص";
            }
            return Html.Raw(content);
        }
    }
    @{
        int userID_ = 0;
        bool isArabic = System.Threading.Thread.CurrentThread.CurrentCulture.TextInfo.IsRightToLeft;
        var dir = isArabic ? "rtl" : "ltr";
        var Email_Tel = isArabic ? "ltr" : "";
        var floatclass = isArabic ? "float-right" : "float-left";
        var style = isArabic ? "margin-right:auto !important;margin-left:-15px !important;" : "";
        //var Cancelbtnstyle = "";
        var acceptbtnstyle = isArabic ? "margin-right: 0.25rem !important;" : "";
        var textRight = isArabic ? "text-right" : "";
        HumanResourceHelth.DataAccess.UnitOfWork _unit = new HumanResourceHelth.DataAccess.UnitOfWork();
        List<HumanResourceHelth.Model.OurPartners> OurPartners = _unit.OurPartnersRepo.GetAll().OrderBy(a => a.PartnerSort).ToList();
    }
    @if (Session["UserId"] == null)
    {
        Session["eligableForFreeSU"] = true;
        Session["eligableForFreeMB"] = true;
        Session["eligableForFree"] = true;
    }
    else
    {
        bool havingMBSub = false;
        bool havingSUSub = false;
        Session["eligableForFreeSU"] = false;
        Session["eligableForFreeMB"] = false;
        userID_ = (int)int.Parse(Session["UserId"].ToString());
        List<UserPlan> subscriptionPlan = _unit.UserPlanRepo.Search(x => x.UserId == userID_ && !x.IsActive).ToList();
        List<UserPlan> subscriptionPlan1 = _unit.UserPlanRepo.Search(x => x.UserId == userID_).ToList();
        if (subscriptionPlan1.Count == 0)
        {
            Session["eligableForFree"] = true;
            Session["eligableForFreeSU"] = true;
            Session["eligableForFreeMB"] = true;
        }
        else
        {
            foreach (UserPlan Plansub in subscriptionPlan1)
            {
                if (Plansub.IsFreeActive)
                {
                    DateTime dateToday = DateTime.Now;
                    if ((Plansub.EndDate.Date - dateToday.Date).Days <= 0)
                    {
                        Plansub.IsActive = false;
                        Plansub.IsFreeActive = false;
                        _unit.SaveChanges();
                    }
                }
                if (Plansub.PlanId == (int)SubscriptionPlan.Startup)
                { havingSUSub = true; }
                if (Plansub.PlanId == (int)SubscriptionPlan.ManualBuilder)
                {
                    havingMBSub = true;
                }
            }
            if (!havingMBSub)
            { Session["eligableForFreeMB"] = true; }
            else
            { Session["eligableForFreeMB"] = false; }
            if (!havingSUSub)
            { Session["eligableForFreeSU"] = true; }
            else
            { Session["eligableForFreeSU"] = false; }
            if (!havingMBSub || !havingSUSub)
            { Session["eligableForFree"] = true; }
            else
            { Session["eligableForFree"] = false; }
        }
        Session["NotActiveuserPlans"] = subscriptionPlan;
    }

    @*@if (Session["eligableForFreeSU"] == null)
        {
            <script type="text/javascript">
                $(document).ready(function () {
                    toastr.error("Your Session has been expired System Will Redirect You To Home Page", "Session Timeout");
                }
            </script>

            Response.Redirect(Url.Action("Index", "Home"));

        }*@
    <!-- header -->
    <header class="gradient-white box-shadow">
        <div class="background-grey-2 padding-tb-5px position-relative">
            <div class="container" style="max-width: 98%">
                <div class="row">
                    <div class="col-2 padding-tb-10px">
                        <!-- lang dropdown -->
                        @if (Session["lang"].ToString() == "en-US")
                        {
                            <a class=" text-white" href="@Url.Action("ChangeLanguage", "Home", new { lang = "ar-OM" })" id="dropdownMenuLink"> عربى </a> }
                        else
                        {
                            <a class=" text-white" href="@Url.Action("ChangeLanguage", "Home", new { lang = "en-US" })" id="dropdownMenuLink"> English </a>}

                        <!-- // lang dropdown -->
                    </div>
                    <div class="col-2 padding-tb-10px">
                        <ul class="list-inline float-right" dir="@dir">
                            @if (Session["UserId"] != null || Session["User"] != null)
                            {
                                <li class="list-inline-item padding-left-10px mr-2 ml-2 @floatclass">
                                    <a href="~/home/Updates">
                                        <img src="~/assets/img/bell.svg" class="img-responsive position-relative" title="@Resources.General.Notifications" alt="@Resources.General.Notifications" /> @if (Session["Notification"] != null)
                                        {<span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger text-white">@Session["Notification"]</span>}
                                    else { }
                                    </a>
                                </li>

                            }
                        </ul>
                    </div>
                    <div class="col-4 text-white text-right text-center" dir="@dir">
                        @if (Session["userPlans"] != null)
                        {
                            var userPlans = Session["userPlans"] as List<UserPlan>;
                            if (userPlans.Count > 0)
                            {

                                <ul class="list-inline float-right" dir="@dir">
                                    <li class="list-inline-item padding-left-10px padding-tb-10px @floatclass"> @Html.ActionLink(Resources.General.MyDashboard, "../Home/UserSubscriptions")</li>
                                    <li class="list-inline-item padding-left-10px mr-2 ml-2 @floatclass">
                                        <a href="~/home/UserSubscriptions">
                                            <img src="~/assets/img/file-text.svg" class="img-responsive position-relative" title="@Resources.General.Plans" alt="@Resources.General.Plans" /> @if (Session["userPlansCount"] != null)
                                            {<span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success text-white">@Session["userPlansCount"]</span>}
                                        else { }
                                        </a>
                                    </li>
                                    @*@foreach (UserPlan userPlan in userPlans)
                                        {
                                            <li class="list-inline-item padding-left-30px @floatclass">
                                                @if (userPlan.Plan.Id == 2)
                                                {
                                                    <a href="/Plans/StartUp"><img src="~/assets/img/start-up.png" class="img-responsive" height="40" width="40" alt="@Resources.General.SubscribeFreeStartUpPlanName" title="@Resources.General.SubscribeFreeStartUpPlanName" /></a>

                                                }
                                                else
                                                {
                                                    <a href="/Plans/ManualBuilder">
                                                        <img src="~/assets/img/bulider.png" class="img-responsive img-25" height="40" width="40" alt="@Resources.General.SubscribeFreeMBPlanName" title="@Resources.General.SubscribeFreeMBPlanName" />
                                                    </a>
                                                }
                                                @{
                                                    TimeSpan dif = userPlan.EndDate.Subtract(DateTime.Now);
                                                    TimeSpan planeBer = userPlan.EndDate.Subtract(userPlan.StartDate);



                                                }
                                                @if (userPlan.IsFreeActive)
                                                {
                                                    <span class="text-brown-3">@Resources.General.FreeSubscription </span>
                                                }
                                                else
                                                {
                                                    if (planeBer.TotalDays < 30)
                                                    {
                                                        if (dif.TotalDays < 30)
                                                        {
                                                            <span class="text-warning">@Resources.General.ThisPlanWillEndSoon </span>
                                                        }
                                                        else if (dif.TotalDays < 15)
                                                        {
                                                            <span class="text-danger">@Resources.General.ThisPlanWillEndSoon </span>
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (dif.TotalDays < 15)
                                                        {
                                                            <span class="text-warning">@Resources.General.ThisPlanWillEndSoon </span>
                                                        }
                                                        else if (dif.TotalDays < 7)
                                                        {
                                                            <span class="text-danger">@Resources.General.ThisPlanWillEndSoon </span>
                                                        }
                                                    }
                                                }
                                            </li>
                                        }*@
                                </ul>
                            }
                            else
                            {
                                <p class="float-right padding-tb-10px">@Resources.General.YouAreNotSubscribed <a href="#subscriptionPlans" class="btn btn-sm background-main-color text-white"> @Resources.General.Subscribe</a> </p>
                            }
                        }
                        <!-- // Social -->
                    </div>
                    @*  <div class="col-xl-4  d-none d-xl-block"> </div>*@
                    <div class="col-4">
                        <ul class="user-area list-inline float-right margin-0px text-white padding-tb-10px">
                            @if (Session["User"] != null)
                            {
                                if (((User)(Session["User"])).IsAdmin)
                                {
                                    if ((bool)Session["CMS"] == true)
                                    {
                                        <li class="list-inline-item"><a href="@Url.Action("DisableCms", "Home")" style="color:lawngreen;">CMS</a></li>
                                    }
                                    else
                                    {
                                        <li class="list-inline-item"><a href="@Url.Action("EnableCms", "Home")" style="color:lightgray;">CMS</a></li>
                                    }
                                }
                            }
                            @if (Session["UserId"] == null || Session["User"] == null)
                            {
                                <li class="list-inline-item  padding-right-10px"><a href="@Url.Action("Index", "Login")"><i class="fa fa-lock padding-right-5px"></i>@Resources.General.Login</a></li>
                                <li class="list-inline-item  padding-right-10px"><a href="@Url.Action("Register", "Login")"><i class="fa fa-user padding-right-5px"></i>@Resources.General.singup</a></li>
                            }
                            else
                            {
                                <li class="list-inline-item  padding-right-10px"><a href="@Url.Action("Logout", "Login")"><i class="fa fa-lock padding-right-5px"></i>@Resources.General.Logout</a></li>
                                <li class="list-inline-item"><a href="@Url.Action("UserProfile", "Home")"><i class="fa fa-user-plus padding-right-5px"></i>@Resources.General.Welcome @(((HumanResourceHelth.Model.User)Session["User"]).Name)</a></li>
                            }
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="header-output">
            <div class="container header-in">
                <div class="row">
                    <div class="col-xl-2 col-lg-2"> <a id="logo" href="/" class="d-inline-block margin-tb-10px"><img src="~/assets/img/logo-1.png" alt=""></a> <a class="mobile-toggle padding-15px background-main-color" href="#"><i class="fas fa-bars"></i></a> </div>
                    <div class="col-xl-3 col-lg-3 margin-tb-25px">
                        <div class="text-center">
                            @{
                                bool isEligableForFree = Session["eligableForFree"] == null ? true : (bool)Session["eligableForFree"];
                                string showSubFree = isEligableForFree ? "" : "d-none";
                            }

                            <ul id="menu-main" class="text-c nav-menu dropdown-dark @showSubFree">
                                <li>
                                    <button type="button" id="subscribeForFree" class="btn btn-acc blink_me" data-bs-toggle="modal" data-bs-target="#FreeSub"><h4>@Resources.General.GetFreeSub </h4> </button>

                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-xl-5 col-lg-5 margin-tb-25px">
                        <div class="float-lg-right">
                            <ul id="menu-main" class="float-lg-left nav-menu dropdown-dark">
                                <li><a href="@Url.Action("Index", "Home")">@Resources.General.Home</a></li>
                                @if (Session["UserId"] == null || Session["User"] == null)
                                {
                                    <li><a href="@(Url.Action("Index", "Home"))#subscriptionPlans">@Resources.General.Subscribe</a> </li>

                                }
                                else
                                {
                                    <li><a href="@(Url.Action("Index", "Home"))#subscriptionPlans">@Resources.General.ThePlans</a> </li>
                                }
                                <li><a href="@Url.Action("Index", "TrainingHome")#learnOnline">@Resources.General.Learn</a> </li>
                                <li class="dropdown">
                                    <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-expanded="false">
                                        @Resources.General.OurPartners
                                    </a>
                                    <div class="dropdown-menu">
                                        @foreach (HumanResourceHelth.Model.OurPartners ourPartner in OurPartners)
                                        {

                                            <a class="dropdown-item" href="@Url.Action("Partner", "Home", new { id = (int) ourPartner.Id })"><img class="contentImage" style="max-height:50px;" src="@Url.Content(ourPartner.PartnerLogo)" alt=""></a>
                                        }
                                        @*<a class="dropdown-item" href="#">Another action</a>*@

                                    </div>
                                </li>
                                <li><a href="@Url.Action("Index", "Home")#consultHR">@Resources.General.Consult</a> </li>
                                <li><a href="@Url.Action("AboutUs", "Home")">@Resources.General.AboutUs</a> </li>
                                @*<li><a href="@Url.Action("ContactUs","Home")">@Resources.General.Ask</a></li>*@
                            </ul>
                        </div>
                    </div>

                    <!-- // Social -->
                    <div class="col-xl-2 col-lg-2 padding-social">
                        <div class="d-none d-lg-block pull-right model-link">
                            <ul class="list-inline text-center margin-0px social">
                                <li class="list-inline-item"><a class="twitter cms" data-contentId="105" href="@GetContent(105)"><i class="fab fa-twitter"></i></a></li>
                                <li class="list-inline-item"><a class="youtube cms" data-contentId="106" href="@GetContent(106)"><i class="fab fa-instagram"></i></a></li>
                                <li class="list-inline-item"><a class="linkedin cms" data-contentId="107" href="@GetContent(107)"><i class="fab fa-linkedin"></i></a></li>
                            </ul>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- // header -->
    @RenderBody()


    <footer class="background-footer" dir="@dir">
        <div class="container">
            <div class="row">
                <div class="col-8 col-lg-10 col-md-10 margin-tb-20px wow fadeInUp">
                    <div class="logo margin-bottom-10px @textRight"><img src="~/assets/img/logo.png" alt=""></div>
                    <div class="text-grey-2 font-weight-300"></div>

                    <!-- // Social -->
                </div>
                <div class="col-4 col-lg-2 col-md-2 wow fadeInUp" data-wow-delay="0.2s">
                    <ul class="list-inline text-left margin-tb-20px margin-lr-0px text-white">
                        <li class="list-inline-item"><a class="twitter cms" data-contentId="105" href="@GetContent(105)"><i class="fab fa-twitter"></i></a></li>
                        <li class="list-inline-item"><a class="youtube cms" data-contentId="106" href="@GetContent(106)"><i class="fab fa-instagram"></i></a></li>
                        <li class="list-inline-item"><a class="linkedin cms" data-contentId="107" href="@GetContent(107)"><i class="fab fa-linkedin"></i></a></li>
                    </ul>
                    <a class="text-white" href="tel:+96879178007" dir="@Email_Tel"><i class="fas fa-phone"></i>&nbsp; +968 7917 8007</a><br />
                    <a class="text-white" href="mailto:care@hrfactoryapp.com" dir="@Email_Tel"><i class="fas fa-envelope"></i>&nbsp; care@hrfactoryapp.com</a>
                </div>
            </div>
        </div>
    </footer>

    <div class="modal fade" id="cmsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" style="z-index:10000;">
        <div class="modal-dialog" role="document" style="max-width: max-content">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="cmsModalLabel">Edit Text</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="cmsModalBody">

                </div>
                @*<div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>*@
            </div>
        </div>
    </div>

    <div class="modal fade" id="changeImageModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" style="z-index:10000;">
        <div class="modal-dialog" role="document" style="max-width: max-content">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="changeImageModalLabel">Change Image</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="changeImageModalBody">
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="FreeSub" tabindex="-1" aria-labelledby="freeSubLabel" aria-hidden="true" dir="@dir">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="freeSubLabel">@Resources.General.SubscribeFreeTitle</h5>
                    <button type="button" class="close" style="@style" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body @textRight">
                    @Resources.General.SubscribeFreeParagraph
                    <ul>
                        @if ((bool)Session["eligableForFreeSU"])
                        {
                            <li>
                                <span class="h5">@Resources.General.SubscribeFreeStartUpPlanName: </span>@Resources.General.SubscribeFreeStartUpPlanDes
                            </li>
                        }
                        @if ((bool)Session["eligableForFreeMB"])
                        {
                            <li>
                                <span class="h5">@Resources.General.SubscribeFreeMBPlanName: </span>@Resources.General.SubscribeFreeMBPlanDes
                            </li>
                        }
                    </ul>
                </div>
                <div class="modal-footer">

                    <button type="button" id="btnSubscripFree" style="@acceptbtnstyle" class="btn btn-primary">@Resources.General.SubscribeFreeBtn</button>
                </div>
            </div>
        </div>
    </div>

    <!--  <script type="text/javascript" src="~/assets/js/numscroller-1.0.js"></script> -->
    <script type="text/javascript" src="~/assets/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="~/assets/js/sticky-sidebar.js"></script>
    <script type="text/javascript" src="~/assets/js/YouTubePopUp.jquery.js"></script>
    <script type="text/javascript" src="~/assets/js/owl.carousel.min.js"></script>
    <script type="text/javascript" src="~/assets/js/imagesloaded.min.js"></script>
    <script type="text/javascript" src="~/assets/js/wow.min.js"></script>
    <script type="text/javascript" src="~/assets/js/popper.min.js"></script>
    <script type="text/javascript" src="~/assets/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="~/assets/js/custom.js"></script>
    @*==========================================================================*@

    @*==========================================================================*@
    @*<script>
            $.blockUI.defaults.message = "Please Wait";
            $(document).ajaxStart($.blockUI).ajaxStop($.unblockUI);
        </script>*@
    <script>
        $(document).ready(function () {
            $("#subscribeForFree").click(function () {

            $("#FreeSub").modal();
            })
            var requestUrl = "https://extreme-ip-lookup.com/json/?key=sswCYj3OKfeIuxY1C3Bd";
            $.ajax({
                url: requestUrl,
                type: 'GET',
                success: function (json) {
                    var country = json.country;
                    var countrycode = json.countryCode;
                    //@Session["CountryCode"]=countrycode;
                    $("#selectCountry option").each(function () {

                        if ($(this).val() == countrycode) {
                            console.log("ddd")
                            $("#selectCountry").attr('selected', true);
                        }
                    });
                    $.ajax({
                        type: 'get',
                        url: 'https://restcountries.com/v3.1/name/' + country,
                        success: function (data) {
                            if (data.length >= 1) {
                                $.ajax({
                                    type: 'get',
                                    url: 'https://restcountries.com/v3.1/name/' + country + '?fullText=true',
                                    success: function (data) {
                                        // console.log(data);
                                        var stringified = JSON.stringify(data);
                                        var parsedObj = JSON.parse(stringified);

                                        $('#countryPhoneKey').html(data[0].idd['root'] + data[0].idd['suffixes'][0]);

                                        $('#flagimg').attr('src', data[0].flags['png']);
                                        $('#flagimg').attr('alt', data[0].idd);

                                    },
                                        });
                            }
                            else if (data.length != 0) {
                                var stringified = JSON.stringify(data);
                                var parsedObj = JSON.parse(stringified);
                                $('#countryPhoneKey').html(data[0].idd['root'] + data[0].idd['suffixes'][0]);

                                $('#flagimg').attr('src', data[0].flags['png']);
                                $('#flagimg').attr('alt', parsedObj[0]['name']);
                            }
                        },
                    });
                },
                error: function (err) {
                    console.log("Request failed, error= " + err);
                },
            });

        });
        $(".cms").on("click", function (e) {

            @if (Session["CMS"] == null || (bool)Session["CMS"] == false) { <text>return;</text>}
            e.preventDefault();
            var contentId = $(this).attr("data-contentId");
            $.ajax({
                url: "@Url.Action("EditContent", "Home")",
                data: { "contentId": contentId},
                sync: false,
                success: function (data) {
                    $("#cmsModalBody").html(data);
                },
                error: function (err, status, error) {
                    debugger;
                    toastr.error(err.statusText)
                },
            });

            $('#cmsModal').modal('show');
        });
        function agree(contorl, div) {
            var x = document.getElementById(div);
            if ($('#' + contorl).is(':checked'))
                x.style.display = "block";

            else
                x.style.display = "none";

        }
        function getCouponDiscount(textbox, link, catogry, price) {
            var linkdata = $('#' + link).attr('href');
            var priceBeforDiscount = price * 1000;
            $.ajax({
                type: 'GET',
                url: '/Coupon/getCouponRate?CouponFor=' + catogry + '&&code=' + $('#' + textbox).val(),
                timeout: 5000,
                success: function (data) {
                    if (data['result'] == "success") {
                        if (textbox == 'CourseCouponCode') {
                            var CourseDiscountRate = parseFloat(data['rate']);
                            var CourseintCost = parseInt(priceBeforDiscount) * ((100 - CourseDiscountRate) / 100);
                            $('#CoursePlanPriceCD').html((priceBeforDiscount / 1000).toFixed(3));
                            $('#CourseCouponDiscRateCD').html(CourseDiscountRate + '%');
                            $('#CoursePriceAftDisCD').html((CourseintCost / 1000).toFixed(3));
                            var CourseLink = $('#' + link).attr('href');
                            //console.log(CourseintCost);
                            //console.log(CourseLink + '');
                            var SiplitedCourseLink = CourseLink.split('&')
                            if (CourseintCost == 0) {
                                var coursesplitedlink = SiplitedCourseLink[0].split('?');
                                console.log(coursesplitedlink);
                                var test = SiplitedCourseLink[0].replace(coursesplitedlink[0], '/TrainingHome/CourseMaterial')
                                console.log(test)
                                $('#' + link).attr('href', test);
                            }
                            else {
                                console.log(SiplitedCourseLink[0]);
                                var priceSpilted = SiplitedCourseLink[1].split('=')
                                var CourseLinkafter = CourseLink.replace(priceSpilted[1], (CourseintCost / 1000).toFixed(3))
                                $('#' + link).attr('href', CourseLinkafter);
                            }

                            $('#CoursePriceSaveCD').html('<del>' + ((priceBeforDiscount - CourseintCost) / 1000).toFixed(3) + '</del>');

                            if ($('#CourseDiscountDiv').hasClass('d-none')) {
                                $('#CourseDiscountDiv').toggleClass('d-none show', true, 400, "easeOutSine");
                                $('#CourseDiscountDiv').removeClass('d-none');
                            }
                        }
                        else {

                            var splitedLink = linkdata.split("=");
                            var RealCost = splitedLink[3];
                            var discountRate = parseFloat(data['rate']);
                            var splitedLinks = linkdata.split("=");
                            var RealCosts = splitedLink[3];
                            var intCost = parseInt((priceBeforDiscount) * ((100 - discountRate) / 100));
                            var intCost1 = parseFloat((priceBeforDiscount) * ((100 - discountRate) / 100)/1000);
                            if (intCost1 == 0.0) intCost1 = intCost1 + '000'
                            var AfterDiscount = linkdata.replace(RealCosts, parseFloat(intCost1));

                            $('#' + link).attr("href", AfterDiscount);
                            if (textbox == 'SearchCouponCodeStartUp') {
                                $('#startupPlanPriceCD').html((priceBeforDiscount / 1000).toFixed(3));
                                $('#startupCouponDiscRateCD').html(discountRate + '%');
                                $('#startupPlanPriceAftDisCD').html((intCost / 1000).toFixed(3));

                                $('#startupPlanPriceSaveCD').html('<del>' + ((priceBeforDiscount - intCost) / 1000).toFixed(3) + '</del>');

                                if ($('#annualStartUpDiscountDiv').hasClass('d-none')) {
                                    $('#annualStartUpDiscountDiv').toggleClass('d-none show', true, 400, "easeOutSine");
                                    $('#annualStartUpDiscountDiv').removeClass('d-none');
                                }
                                if (intCost == 0) {
                                    if ($('#freeSubscribeStartUPAnnual').hasClass('d-none')) {
                                        $('#freeSubscribeStartUPAnnual').removeClass('d-none')
                                        $('#' + link).addClass('d-none');
                                    }
                                }
                                else {
                                    if ($('#' + link).hasClass('d-none')) {
                                        $('#freeSubscribeStartUPAnnual').addClass('d-none')
                                        $('#' + link).removeClass('d-none');
                                    }
                                }
                            }
                            if (textbox == 'MonthlySearchCouponCodeStartUp') {
                                $('#MonthlystartupPlanPriceCD').html((priceBeforDiscount / 1000));
                                $('#MonthlystartupCouponDiscRateCD').html(discountRate + '%');
                                $('#MonthlystartupPlanPriceAftDisCD').html((intCost / 1000).toFixed(3));

                                $('#MonthlystartupPlanPriceSaveCD').html('<del>' + ((priceBeforDiscount - intCost) / 1000).toFixed(3) + '</del>');

                                if ($('#MonthlyStartUpDiscountDiv').hasClass('d-none')) {
                                    $('#MonthlyStartUpDiscountDiv').toggleClass('d-none show', true, 400, "easeOutSine");
                                    $('#MonthlyStartUpDiscountDiv').removeClass('d-none');
                                }

                                if (intCost == 0) {
                                    if ($('#freeSubscribeStartUPMonthly').hasClass('d-none')) {
                                        $('#freeSubscribeStartUPMonthly').removeClass('d-none')
                                        $('#' + link).addClass('d-none');
                                    }
                                }
                                else {
                                    if ($('#' + link).hasClass('d-none')) {
                                        $('#freeSubscribeStartUPMonthly').addClass('d-none')
                                        $('#' + link).removeClass('d-none');
                                    }
                                }
                            }
                            if (textbox == 'MonthlySearchCouponCodeManualBuilder') {
                                $('#MonthlyManualBuilderPlanPriceCD').html((priceBeforDiscount / 1000));
                                $('#MonthlyManualBuilderCouponDiscRateCD').html(discountRate + '%');
                                $('#MonthlyManualBuilderPlanPriceAftDisCD').html((intCost / 1000).toFixed(3));

                                $('#MonthlyManualBuilderPlanPriceSaveCD').html('<del>' + ((priceBeforDiscount - intCost) / 1000).toFixed(3) + '</del>');

                                if ($('#MonthlyManualBuilderDiscountDiv').hasClass('d-none')) {
                                    $('#MonthlyManualBuilderDiscountDiv').toggleClass('d-none show', true, 400, "easeOutSine");
                                    $('#MonthlyManualBuilderDiscountDiv').removeClass('d-none');
                                }
                                if (intCost == 0) {
                                    if ($('#freeSubscribeManualBuilderMonthly').hasClass('d-none')) {
                                        $('#freeSubscribeManualBuilderMonthly').removeClass('d-none')
                                        $('#' + link).addClass('d-none');
                                    }
                                }
                                else {
                                    if ($('#' + link).hasClass('d-none')) {
                                        $('#freeSubscribeManualBuilderMonthly').addClass('d-none')
                                        $('#' + link).removeClass('d-none');
                                    }
                                }
                            }
                            if (textbox == 'AnnualSearchCouponCodeManualBuilder') {
                                $('#AnnualManualBuilderPlanPriceCD').html((priceBeforDiscount / 1000));
                                $('#AnnualManualBuilderCouponDiscRateCD').html(discountRate + '%');
                                $('#AnnualManualBuilderPlanPriceAftDisCD').html((intCost / 1000).toFixed(3));

                                $('#AnnualManualBuilderPlanPriceSaveCD').html('<del>' + ((priceBeforDiscount - intCost) / 1000).toFixed(3) + '</del>');

                                if ($('#AnnualManualBuilderDiscountDiv').hasClass('d-none')) {
                                    $('#AnnualManualBuilderDiscountDiv').toggleClass('d-none show', true, 400, "easeOutSine");
                                    $('#AnnualManualBuilderDiscountDiv').removeClass('d-none');


                                }
                                if (intCost == 0) {
                                    if ($('#freeSubscribeManualBuilderAnnual').hasClass('d-none')) {
                                        $('#freeSubscribeManualBuilderAnnual').removeClass('d-none')
                                        $('#' + link).addClass('d-none');
                                    }
                                }
                                else {
                                    if ($('#' + link).hasClass('d-none')) {
                                        $('#freeSubscribeManualBuilderAnnual').addClass('d-none')
                                        $('#' + link).removeClass('d-none');
                                    }
                                }
                            }

                        }
                    }
                    else {

                        splitedLink = linkdata.split('=');
                        var RealCost = splitedLink[3];

                        var nochange = linkdata.replace(RealCost, parseInt(priceBeforDiscount));
                        $('#' + link).attr("href", nochange);

                        if (textbox == 'SearchCouponCodeStartUp') {
                            if (!$('#annualStartUpDiscountDiv').hasClass('d-none')) {
                                $('#annualStartUpDiscountDiv').addClass('d-none');

                            }
                        }
                        if (textbox == 'MonthlySearchCouponCodeStartUp') {
                            if (!$('#MonthlyStartUpDiscountDiv').hasClass('d-none')) {
                                $('#MonthlyStartUpDiscountDiv').addClass('d-none');

                            }
                        }
                        if (textbox == 'MonthlySearchCouponCodeManualBuilder') {
                            if (!$('#MonthlyManualBuilderDiscountDiv').hasClass('d-none')) {
                                $('#MonthlyManualBuilderDiscountDiv').addClass('d-none');

                            }
                        }
                        if (textbox == 'AnnualSearchCouponCodeManualBuilder') {
                            if (!$('#AnnualManualBuilderDiscountDiv').hasClass('d-none')) {
                                $('#AnnualManualBuilderDiscountDiv').addClass('d-none');

                            }
                        }
                        if (textbox == 'CourseCouponCode') {
                            if (!$('#CourseDiscountDiv').hasClass('d-none')) {
                                $('#CourseDiscountDiv').addClass('d-none');

                            }
                        }
                    }
                },
            });

        }
        $('#selectCountry').change(function () {
            var country = $("#selectCountry option:selected").val();

            $.ajax({
                type: 'get',
                url: 'https://restcountries.com/v2/alpha/' + country,
                success: function (data) {
                    if (data.length >= 1) {
                        $.ajax({
                            type: 'get',
                            url: 'https://restcountries.com/v3.1/name/' + data.name + '?fullText=true',
                            success: function (data) {
                                // console.log(data);
                                if (data.length > 0) {
                                    var stringified = JSON.stringify(data);
                                    var parsedObj = JSON.parse(stringified);
                                    $('#countryPhoneKey').html(data[0].idd['root'] + data[0].idd['suffixes'][0]);

                                    $('#flagimg').attr('src', data[0].flags['png']);
                                    $('#flagimg').attr('alt', parsedObj[0]['name']);
                                } else {
                                    alert("wiwi");
                                }

                            },
                            error: function (data) {
                                $('#countryPhoneKey').html('Double Click Here');

                                $('#flagimg').attr('src', 'None');
                                $('#flagimg').attr('alt', 'Not Availabel');
                            },

                        });
                    }
                    else if (data.length != 0) {

                        //console.log(data);
                        var stringified = JSON.stringify(data);
                        var parsedObj = JSON.parse(stringified);
                        $('#countryPhoneKey').html(data.callingCodes[0]);


                        $('#flagimg').attr('src', data.flags["png"]);
                        $('#flagimg').attr('alt', data.name);

                    }
                    else {
                        alert("ddd");
                    }

                },
            });
        });

    </script>
    <script>
        $(".contentImage").on("click", function () {
            debugger;
            var currentSource = $(this).attr("src");
            $(this).uniqueId();
            var imageId = $(this).attr("Id");
            @if (Session["CMS"] == null || (bool)Session["CMS"] == false) { <text>return;</text>}

            $.ajax({
                url: "@Url.Action("ChangeImage", "Home")",
                data: { currentSource: currentSource, imageId: imageId},
                sync: false,
                success: function (data) {
                    $("#changeImageModalBody").html(data);
                },
                error: function (err, status, error) {
                    debugger;
                    toastr.error(err.statusText)
                },
            });
            $('#changeImageModal').modal('show');
        });
        $("#btnSubscripFree").on("click", function () {
            @{
                int totalFreePlans = 0;
                var flage = Session["User"] != null? 1:0;
                var userID = Session["UserId"] != null ? Session["UserId"] : "none";
                int eligableforSU = 1;
                if (Session["eligableForFreeSU"] != null)
                { eligableforSU = (bool)Session["eligableForFreeSU"] ? 1 : 0; }
                int eligableforMB = 1;
                if (Session["eligableForFreeMB"] != null)
                { eligableforMB = (bool)Session["eligableForFreeMB"] ? 1 : 0; }
                totalFreePlans = eligableforSU + eligableforMB;
                Session["Backto"] = "UserPlans";
                }

            if (@flage== 1) {
                let counter = 0;
                var totalFreePlans =@totalFreePlans
                    let startDate = new Date();
                let endDate = new Date();
                endDate.setDate(endDate.getDate() + 7);
                var startmonth = ((startDate.getMonth() + 1));
                var Endmonth = ((endDate.getMonth() + 1));
                startDay = startDate.getDate();
                startYear = startDate.getFullYear();
                endDay = endDate.getDate();
                endYear = endDate.getFullYear();
                var userId =@userID;
                var planId = "2";
                var fromDay = startDay;
                var fromMonth = startmonth;
                var fromYear = startYear;
                var toDay = endDay;
                var toMonth = Endmonth;
                var toYear = endYear;
                var price = 0;

                if (@eligableforSU== 1) {
                    $.ajax({
                        url: "@Url.Action("SubscribeFree", "Plans")",
                        data: {
                            "userId": userId, "planId": planId,
                            "fromDay": fromDay, "fromMonth": fromMonth, "fromYear": fromYear,
                            "toDay": toDay, "toMonth": toMonth, "toYear": toYear,
                            "price": price, "isTrail": true
                        },
                        type: "GET",
                        success: function () {
                            counter++;
                            toastr.success("@Resources.General.SubscribeFreeSucess");
                        },
                        error: function (err) {
                            toastr.error(err.statusText)
                        }
                    });
                }
                if (@eligableforMB== 1) {
                    planId = "3";
                    $.ajax({
                        url: "@Url.Action("SubscribeFree", "Plans")",
                        data: {
                            "userId": userId, "planId": planId,
                            "fromDay": fromDay, "fromMonth": fromMonth, "fromYear": fromYear,
                            "toDay": toDay, "toMonth": toMonth, "toYear": toYear,
                            "price": price, "isTrail": true
                        },
                        type: "GET",
                        success: function () {
                            counter++;
                            toastr.success("@Resources.General.SubscribeFreeSucess");
                        },
                        error: function (err) {
                            toastr.error(err.statusText)
                        }
                    });
                }
                if (counter == totalFreePlans) {
                    var url = window.location.protocol + "//" + window.location.host;
                    url = url + "/Home/UserSubscriptions";
                    window.location=url;
                }
            }
            else {
                window.location.replace("/Login#LoginArea");
            }
        });
        function showPss(control, id) {
            //console.log($('#'+control));
            var flage = false;
            var classList = $('#' + id).attr('class').split(/\s+/);
            $.each(classList, function (index, item) {
                if (item === 'fa-eye-slash') {
                    flage = true;
                }
            });
            if (flage) {
                $("#" + id).attr('class', "fa fa-eye");
                $("#" + control).prop("type", "text");
            }
            else {
                $("#" + id).attr('class', "fa fa-eye-slash");
                $("#" + control).prop("type", "password");
            }

        }
    </script>

    <script type="text/javascript">
        pullIcon = "pull-left";
        @if(isArabic)
            {
            <text>pullIcon="pull-right"</text>
            }
        var $zoho = $zoho || {}; $zoho.salesiq = $zoho.salesiq || { widgetcode: "a0bf81e7cc85be531435933c0fb3566921edc78b8a6779188a891ea821207fc1", values: {}, ready: function () { } };
        var d = document;
        s = d.createElement("script");
        s.type = "text/javascript";
        s.id = "zsiqscript";
        s.src = "https://salesiq.zoho.com/widget";

        t = d.getElementsByTagName("script")[0];
        t.parentNode.insertBefore(s, t);
        console.log(s)
        d.write("<div id='zsiqwidget'></div>");
    </script>
</body>
</html>
