@using HumanResourceHelth.Model
@using HumanResourceHelth.Web.Models
@model HumanResourceHelth.Web.Models.SurveyResultViewModels
<style>
    .demo {
        width: 10vw;
        height: 10vw;
        box-sizing: border-box;
        float: left;
        margin: 20px
    }
</style>

<link rel="stylesheet" type="text/css" href="~/Content/jquery.dynameter.css">
<script type="text/javascript" src="~/Scripts/jquery.dynameter.js"></script>

@functions{
    IHtmlString GetContent(int contentId)
    {
        string content = "";
        List<Content> contents = (List<Content>)Session["Content"];
        if (!System.Threading.Thread.CurrentThread.CurrentCulture.TextInfo.IsRightToLeft)
        {
            content = contents.Where(x => x.Id == contentId).Single().EnglishText;
            if (content.Trim() == "") content = "Please Insert Text";
        }
        else
        {
            content = contents.Where(x => x.Id == contentId).Single().ArabicText;
            if (content.Trim() == "") content = "برجاء ادخال نص";
        }

        return Html.Raw(content);
    }
}

<div id="page-title" class="text-grey background-overlay " style="background-image: url('@Url.Content("~/assets/img/warmup.jpg")');background-size: cover;background-repeat: no-repeat;padding: 60px 0">
    <div>
        <div class="container padding-tb-35px z-index-2 position-relative">
            <div class="row">
                <div class="col-xl-2"><img src="~/assets/img/logo-1.png" alt=""></div>
            </div>
            <h3 class="font-weight-700 text-capitalize page-title-tech cms" data-contentId="89">@GetContent(89)</h3>
        </div>
    </div>
</div>

<section class="padding-tb-80px background-white">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 col-md-6 sm-mb-30px wow fadeInUp legend" style="visibility: visible; animation-name: fadeInUp;">
                <svg class="svg-inline--fa fa-frown fa-w-16 text-danger" aria-hidden="true" data-prefix="fa" data-icon="frown" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zm-396-64c0 37.497 30.503 68 68 68s68-30.503 68-68-30.503-68-68-68-68 30.503-68 68zm160.5 0c0 37.221 30.279 67.5 67.5 67.5s67.5-30.279 67.5-67.5-30.279-67.5-67.5-67.5-67.5 30.279-67.5 67.5zm67.5-48a47.789 47.789 0 0 0-22.603 5.647h.015c10.916 0 19.765 8.849 19.765 19.765s-8.849 19.765-19.765 19.765-19.765-8.849-19.765-19.765v-.015A47.789 47.789 0 0 0 288 192c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48zm-160 0a47.789 47.789 0 0 0-22.603 5.647h.015c10.916 0 19.765 8.849 19.765 19.765s-8.849 19.765-19.765 19.765-19.765-8.849-19.765-19.765v-.015A47.789 47.789 0 0 0 128 192c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48zm192.551 212.66c-59.128-91.455-165.846-91.594-225.064 0-11.502 17.79 15.383 35.148 26.873 17.374 46.626-72.118 124.862-71.855 171.318 0 11.328 17.524 38.548.684 26.873-17.374z"></path></svg><!-- <i class="fa fa-frown text-danger"></i> -->
                <h2 class="cms" data-contentId="90">@GetContent(90)</h2>
                <p class="cms" data-contentId="91">@GetContent(91)</p>
            </div>
            <div class="col-lg-4 col-md-6 sm-mb-30px wow fadeInUp legend" style="visibility: visible; animation-name: fadeInUp;">
                <svg class="svg-inline--fa fa-meh fa-w-16 text-warning" aria-hidden="true" data-prefix="fa" data-icon="meh" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zm-396-64c0 37.497 30.503 68 68 68s68-30.503 68-68-30.503-68-68-68-68 30.503-68 68zm160.5 0c0 37.221 30.279 67.5 67.5 67.5s67.5-30.279 67.5-67.5-30.279-67.5-67.5-67.5-67.5 30.279-67.5 67.5zm67.5-48a47.789 47.789 0 0 0-22.603 5.647h.015c10.916 0 19.765 8.849 19.765 19.765s-8.849 19.765-19.765 19.765-19.765-8.849-19.765-19.765v-.015A47.789 47.789 0 0 0 288 192c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48zm-160 0a47.789 47.789 0 0 0-22.603 5.647h.015c10.916 0 19.765 8.849 19.765 19.765s-8.849 19.765-19.765 19.765-19.765-8.849-19.765-19.765v-.015A47.789 47.789 0 0 0 128 192c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48zm160 208H176c-21.178 0-21.169 32 0 32h160c21.178 0 21.169-32 0-32z"></path></svg><!-- <i class="fa fa-meh text-warning"></i> -->
                <h2 class="cms" data-contentId="92">@GetContent(92)</h2>
                <p class="cms" data-contentId="93">@GetContent(93)</p>
            </div>
            <div class="col-lg-4 col-md-6 sm-mb-30px wow fadeInUp legend" style="visibility: visible; animation-name: fadeInUp;">
                <svg class="svg-inline--fa fa-smile fa-w-16 text-success" aria-hidden="true" data-prefix="fa" data-icon="smile" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zm-122.526 75.34c11.479-17.755-15.349-35.194-26.873-17.374-53.418 82.627-143.71 82.681-197.164 0-11.502-17.79-38.364-.401-26.873 17.374 66.014 102.107 184.795 102.265 250.91 0zM108 192c0 37.497 30.503 68 68 68s68-30.503 68-68-30.503-68-68-68-68 30.503-68 68zm160.5 0c0 37.221 30.279 67.5 67.5 67.5s67.5-30.279 67.5-67.5-30.279-67.5-67.5-67.5-67.5 30.279-67.5 67.5zm67.5-48a47.789 47.789 0 0 0-22.603 5.647h.015c10.916 0 19.765 8.849 19.765 19.765s-8.849 19.765-19.765 19.765-19.765-8.849-19.765-19.765v-.015A47.789 47.789 0 0 0 288 192c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48zm-160 0a47.789 47.789 0 0 0-22.603 5.647h.015c10.916 0 19.765 8.849 19.765 19.765s-8.849 19.765-19.765 19.765-19.765-8.849-19.765-19.765v-.015A47.789 47.789 0 0 0 128 192c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48z"></path></svg><!-- <i class="fa fa-smile text-success"></i> -->
                <h2 class="cms" data-contentId="94">@GetContent(94)</h2>
                <p class="cms" data-contentId="95">@GetContent(95)</p>
            </div>
        </div>
        <br />
        <hr class="wow fadeInUp" style="visibility: visible; animation-name: fadeInUp;">
        @foreach (SurveyResult surveyResult in Model.Survey.SurveyResults)
        {
            string myColor = "";
            if (surveyResult.Result > 66)
            {
                //myColor = "badge-success";
                myColor = "Green";
            }
            else if (surveyResult.Result > 33)
            {
                //myColor = "badge-warning";
                myColor = "#FFC107";
            }
            else
            {
                myColor = "badge-red";
                myColor = "Red";
            }

            <div style="text-align:center;color:@myColor;" class="col-12">
                <h3>
                    @if (!System.Threading.Thread.CurrentThread.CurrentCulture.TextInfo.IsRightToLeft)
                    {
                        @surveyResult.Indicator.Name
                    }
                    else
                    {
                        @surveyResult.Indicator.NameAr
                    }
                </h3>
            </div>
            <div class="row padding-tb-50px">
                <div class="col-lg-3 col-md-6 sm-mb-30px wow fadeInUp" style="visibility: visible; animation-name: fadeInUp;">
                    @*<div class="indicator@(surveyResult.Indicator.Id) demo"></div>*@
                    <div id="divMeter@(surveyResult.IndicatorId)"></div>
                </div>
                <div class="col-lg-9 col-md-6 sm-mb-30px wow fadeInUp" style="visibility: visible; animation-name: fadeInUp;">
                    <div class="perf-text">
                        <table>
                            @*<thead>
                                <tr>
                                    <td colspan="2">
                                        <h3>
                                            @if ((string)Session["Lang"] != "ar-EG")
                                            {
                                                @surveyResult.Indicator.Name
                                            }
                                            else
                                            {
                                                @surveyResult.Indicator.NameAr
                                            }
                                        </h3>
                                    </td>
                                </tr>
                            </thead>*@
                            <tbody>
                                @foreach (Result result in Model.Results.Where(x => x.Indicator.Id == surveyResult.IndicatorId).ToList())
                                {
                                    myColor = "";
                                    switch (result.Answer.Mark)
                                    {
                                        case 100:
                                            myColor = "bg-success";
                                            break;
                                        case 50:
                                            myColor = "bg-warning";
                                            break;
                                        case 0:
                                            myColor = "bg-danger";
                                            break;
                                        case -1:
                                            myColor = "bg-secondary";
                                            break;
                                    }

                                    <tr class="@myColor">
                                        @if (!System.Threading.Thread.CurrentThread.CurrentCulture.TextInfo.IsRightToLeft)
                                        {
                                            <td><p>@result.Question.Name</p></td>
                                            <td><p>@result.Question.Practice</p></td>
                                        }
                                        else
                                        {
                                            <td><p>@result.Question.NameAr</p></td>
                                            <td><p>@result.Question.PracticeAr</p></td>
                                        }
                                    </tr>
                                }

                            </tbody>
                        </table>


                    </div>
                </div>
            </div>
            <hr class="wow fadeInUp" style="visibility: visible; animation-name: fadeInUp;">
        }
    </div>
</section>

<script type="text/javascript">
    $(function () {
           @foreach (SurveyResult result in Model.Survey.SurveyResults)
           {
               <text>
                $("#divMeter@(result.IndicatorId)").dynameter({
                    width: 200,
                    label: '',
                    value: @(result.Result),
                    min: 0.0,
                    max: 100.0,
                    unit: '%',
                    regions: {
                        0: 'error',
                        33: 'warn',
                        66: 'normal'
                    }
                });
                </text>
            }
        });
</script>


<script>

    @foreach (SurveyResult result in Model.Survey.SurveyResults)
    {
        <text>
            // second example
    $('.indicator@(result.IndicatorId)').gauge({
        values:
            {
                0: '0',
            10: '10',
            20: '20',
            30: '30',
            40: '40',
            50: '50',
            60: '60',
            70: '70',
            80: '80',
            90: '90',
            100: '100'
                },
        colors:
            {
                0: '#ff0000',
            33: '#FFFF00',
            66: '#A8FF26',
        },
        angles:[
            180,
            360
        ],
        lineWidth: 10,
        arrowWidth: 20,
        arrowColor: '#ccc',
        inset: true,

        value: @(result.Result)
    });
    </text>
    }
</script>
